<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.64" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://seamice.github.io/blog/techniques/R/03.Data%20manipulation.html"><meta property="og:site_name" content="Haiyue's Blog"><meta property="og:title" content="03. Data manipulation"><meta property="og:description" content="This article mainly focus on how to manage data using different packages"><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2023-07-24T11:33:33.000Z"><meta property="article:author" content="Haiyue"><meta property="article:tag" content="data"><meta property="article:tag" content="manipulation"><meta property="article:published_time" content="2023-07-20T00:00:00.000Z"><meta property="article:modified_time" content="2023-07-24T11:33:33.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"03. Data manipulation","image":[""],"datePublished":"2023-07-20T00:00:00.000Z","dateModified":"2023-07-24T11:33:33.000Z","author":[{"@type":"Person","name":"Haiyue"}]}</script><title>03. Data manipulation | Haiyue's Blog</title><meta name="description" content="This article mainly focus on how to manage data using different packages">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-3e1c6a44.css" as="style"><link rel="stylesheet" href="/assets/style-3e1c6a44.css">
    <link rel="modulepreload" href="/assets/app-49149863.js"><link rel="modulepreload" href="/assets/03.Data manipulation.html-2eb40ef6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/03.Data manipulation.html-d00a0b23.js"><link rel="prefetch" href="/assets/index.html-148edd72.js" as="script"><link rel="prefetch" href="/assets/intro.html-f3e1d0ba.js" as="script"><link rel="prefetch" href="/assets/index.html-a8302924.js" as="script"><link rel="prefetch" href="/assets/index.html-9ee3dc07.js" as="script"><link rel="prefetch" href="/assets/index.html-ee531e6e.js" as="script"><link rel="prefetch" href="/assets/task_details.html-cc9b77f3.js" as="script"><link rel="prefetch" href="/assets/index.html-2cae6318.js" as="script"><link rel="prefetch" href="/assets/index.html-ea168048.js" as="script"><link rel="prefetch" href="/assets/libft.html-855fc996.js" as="script"><link rel="prefetch" href="/assets/index.html-9689a5ab.js" as="script"><link rel="prefetch" href="/assets/index.html-524a4d73.js" as="script"><link rel="prefetch" href="/assets/Amplify.html-051b1e12.js" as="script"><link rel="prefetch" href="/assets/index.html-5b338c9d.js" as="script"><link rel="prefetch" href="/assets/01.R Language.html-731bef01.js" as="script"><link rel="prefetch" href="/assets/02.Statistical tests.html-56920f59.js" as="script"><link rel="prefetch" href="/assets/index.html-66d8ab7d.js" as="script"><link rel="prefetch" href="/assets/index.html-b2a5c58b.js" as="script"><link rel="prefetch" href="/assets/gcptowarp.html-08d18e68.js" as="script"><link rel="prefetch" href="/assets/vivid_retrive_and_analysis.html-060d357b.js" as="script"><link rel="prefetch" href="/assets/index.html-a4712d63.js" as="script"><link rel="prefetch" href="/assets/basic_usage.html-e23def0b.js" as="script"><link rel="prefetch" href="/assets/post_site_using_git.html-0fad9769.js" as="script"><link rel="prefetch" href="/assets/index.html-14f385da.js" as="script"><link rel="prefetch" href="/assets/psql_conn_pool.html-d73bc260.js" as="script"><link rel="prefetch" href="/assets/thread.html-da426232.js" as="script"><link rel="prefetch" href="/assets/Big Data Concepts.html-3c0787bb.js" as="script"><link rel="prefetch" href="/assets/index.html-cd6e1712.js" as="script"><link rel="prefetch" href="/assets/Relational Databases and Warehouses.html-620207e6.js" as="script"><link rel="prefetch" href="/assets/Statistical Programming for Data Science.html-024e786c.js" as="script"><link rel="prefetch" href="/assets/Statistics for Data Science.html-bd956bcb.js" as="script"><link rel="prefetch" href="/assets/Data Visualisation.html-2bed49e7.js" as="script"><link rel="prefetch" href="/assets/Predictive Analytics.html-bc9cbd84.js" as="script"><link rel="prefetch" href="/assets/index.html-4729b407.js" as="script"><link rel="prefetch" href="/assets/Research Methods.html-6ee6d06b.js" as="script"><link rel="prefetch" href="/assets/Unsupervised Methods in Analytics.html-b7a1e668.js" as="script"><link rel="prefetch" href="/assets/index.html-d0626d8d.js" as="script"><link rel="prefetch" href="/assets/AdvancedAnalyticTechniques1.html-40385649.js" as="script"><link rel="prefetch" href="/assets/LinearRegressionAnalysis.html-1b69b5c5.js" as="script"><link rel="prefetch" href="/assets/index.html-1e44f05e.js" as="script"><link rel="prefetch" href="/assets/AdvancedAnalyticTechniques2.html-b8fa0a61.js" as="script"><link rel="prefetch" href="/assets/index.html-cafc5958.js" as="script"><link rel="prefetch" href="/assets/Data Science Professional Development.html-c8089821.js" as="script"><link rel="prefetch" href="/assets/index.html-f09cf691.js" as="script"><link rel="prefetch" href="/assets/404.html-22f88149.js" as="script"><link rel="prefetch" href="/assets/index.html-00781cd8.js" as="script"><link rel="prefetch" href="/assets/index.html-5ca91490.js" as="script"><link rel="prefetch" href="/assets/index.html-c8862c87.js" as="script"><link rel="prefetch" href="/assets/index.html-f5676493.js" as="script"><link rel="prefetch" href="/assets/index.html-dd12c8d0.js" as="script"><link rel="prefetch" href="/assets/index.html-a3570177.js" as="script"><link rel="prefetch" href="/assets/index.html-55f3d8c8.js" as="script"><link rel="prefetch" href="/assets/index.html-54a18fae.js" as="script"><link rel="prefetch" href="/assets/index.html-94aad3b6.js" as="script"><link rel="prefetch" href="/assets/index.html-2a23a78f.js" as="script"><link rel="prefetch" href="/assets/index.html-6625ad7f.js" as="script"><link rel="prefetch" href="/assets/index.html-8a70f073.js" as="script"><link rel="prefetch" href="/assets/index.html-eb7c66a7.js" as="script"><link rel="prefetch" href="/assets/index.html-3035c392.js" as="script"><link rel="prefetch" href="/assets/index.html-3635ca75.js" as="script"><link rel="prefetch" href="/assets/index.html-758fefae.js" as="script"><link rel="prefetch" href="/assets/index.html-7359f7a5.js" as="script"><link rel="prefetch" href="/assets/index.html-eb85b9e6.js" as="script"><link rel="prefetch" href="/assets/index.html-a02a22a7.js" as="script"><link rel="prefetch" href="/assets/index.html-3c620d40.js" as="script"><link rel="prefetch" href="/assets/index.html-97ef5b56.js" as="script"><link rel="prefetch" href="/assets/index.html-23b4ba33.js" as="script"><link rel="prefetch" href="/assets/index.html-82780aa1.js" as="script"><link rel="prefetch" href="/assets/index.html-6ca2fb23.js" as="script"><link rel="prefetch" href="/assets/index.html-71b4d405.js" as="script"><link rel="prefetch" href="/assets/index.html-1b626961.js" as="script"><link rel="prefetch" href="/assets/index.html-e0fba5cf.js" as="script"><link rel="prefetch" href="/assets/index.html-0e1dd573.js" as="script"><link rel="prefetch" href="/assets/index.html-92b70ed4.js" as="script"><link rel="prefetch" href="/assets/index.html-9b844995.js" as="script"><link rel="prefetch" href="/assets/index.html-60418c5e.js" as="script"><link rel="prefetch" href="/assets/index.html-1bff4bdd.js" as="script"><link rel="prefetch" href="/assets/index.html-428ca079.js" as="script"><link rel="prefetch" href="/assets/index.html-f53400be.js" as="script"><link rel="prefetch" href="/assets/index.html-360d5647.js" as="script"><link rel="prefetch" href="/assets/index.html-5afd0f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-b1101840.js" as="script"><link rel="prefetch" href="/assets/index.html-b062dbb0.js" as="script"><link rel="prefetch" href="/assets/index.html-a8948cba.js" as="script"><link rel="prefetch" href="/assets/index.html-9a3b2b8c.js" as="script"><link rel="prefetch" href="/assets/index.html-aa1e53c9.js" as="script"><link rel="prefetch" href="/assets/index.html-9805d58a.js" as="script"><link rel="prefetch" href="/assets/index.html-1a501a68.js" as="script"><link rel="prefetch" href="/assets/intro.html-561dc435.js" as="script"><link rel="prefetch" href="/assets/index.html-4f2de808.js" as="script"><link rel="prefetch" href="/assets/index.html-37e0cdd0.js" as="script"><link rel="prefetch" href="/assets/index.html-d07acdad.js" as="script"><link rel="prefetch" href="/assets/task_details.html-a3a4fe7a.js" as="script"><link rel="prefetch" href="/assets/index.html-101da291.js" as="script"><link rel="prefetch" href="/assets/index.html-166c2940.js" as="script"><link rel="prefetch" href="/assets/libft.html-2adad89a.js" as="script"><link rel="prefetch" href="/assets/index.html-7de0a42f.js" as="script"><link rel="prefetch" href="/assets/index.html-6c831557.js" as="script"><link rel="prefetch" href="/assets/Amplify.html-a8ce41a3.js" as="script"><link rel="prefetch" href="/assets/index.html-ab844c03.js" as="script"><link rel="prefetch" href="/assets/01.R Language.html-cc583aca.js" as="script"><link rel="prefetch" href="/assets/02.Statistical tests.html-4565314a.js" as="script"><link rel="prefetch" href="/assets/index.html-44aaf654.js" as="script"><link rel="prefetch" href="/assets/index.html-2eff2df5.js" as="script"><link rel="prefetch" href="/assets/gcptowarp.html-10cedf8f.js" as="script"><link rel="prefetch" href="/assets/vivid_retrive_and_analysis.html-fb53c2cd.js" as="script"><link rel="prefetch" href="/assets/index.html-5f318093.js" as="script"><link rel="prefetch" href="/assets/basic_usage.html-802685cd.js" as="script"><link rel="prefetch" href="/assets/post_site_using_git.html-d2ca638e.js" as="script"><link rel="prefetch" href="/assets/index.html-18c2559b.js" as="script"><link rel="prefetch" href="/assets/psql_conn_pool.html-3559e50f.js" as="script"><link rel="prefetch" href="/assets/thread.html-04b0db8b.js" as="script"><link rel="prefetch" href="/assets/Big Data Concepts.html-268aba69.js" as="script"><link rel="prefetch" href="/assets/index.html-c22ab581.js" as="script"><link rel="prefetch" href="/assets/Relational Databases and Warehouses.html-11987208.js" as="script"><link rel="prefetch" href="/assets/Statistical Programming for Data Science.html-cee8dfb8.js" as="script"><link rel="prefetch" href="/assets/Statistics for Data Science.html-eeca1496.js" as="script"><link rel="prefetch" href="/assets/Data Visualisation.html-cc06effa.js" as="script"><link rel="prefetch" href="/assets/Predictive Analytics.html-c11a63a0.js" as="script"><link rel="prefetch" href="/assets/index.html-9d20394f.js" as="script"><link rel="prefetch" href="/assets/Research Methods.html-42707820.js" as="script"><link rel="prefetch" href="/assets/Unsupervised Methods in Analytics.html-70e9f6a6.js" as="script"><link rel="prefetch" href="/assets/index.html-98dc825a.js" as="script"><link rel="prefetch" href="/assets/AdvancedAnalyticTechniques1.html-ea40b167.js" as="script"><link rel="prefetch" href="/assets/LinearRegressionAnalysis.html-64a49e56.js" as="script"><link rel="prefetch" href="/assets/index.html-b6f21047.js" as="script"><link rel="prefetch" href="/assets/AdvancedAnalyticTechniques2.html-5b48dbde.js" as="script"><link rel="prefetch" href="/assets/index.html-f3b2ee17.js" as="script"><link rel="prefetch" href="/assets/Data Science Professional Development.html-02a0f6ae.js" as="script"><link rel="prefetch" href="/assets/index.html-fafe18d3.js" as="script"><link rel="prefetch" href="/assets/404.html-228c94df.js" as="script"><link rel="prefetch" href="/assets/index.html-feb24371.js" as="script"><link rel="prefetch" href="/assets/index.html-705342c1.js" as="script"><link rel="prefetch" href="/assets/index.html-b6e3c0ea.js" as="script"><link rel="prefetch" href="/assets/index.html-67f189eb.js" as="script"><link rel="prefetch" href="/assets/index.html-4667b94a.js" as="script"><link rel="prefetch" href="/assets/index.html-5f9426e9.js" as="script"><link rel="prefetch" href="/assets/index.html-d2045c73.js" as="script"><link rel="prefetch" href="/assets/index.html-d5205329.js" as="script"><link rel="prefetch" href="/assets/index.html-acc99a51.js" as="script"><link rel="prefetch" href="/assets/index.html-b9958d7e.js" as="script"><link rel="prefetch" href="/assets/index.html-bbd54624.js" as="script"><link rel="prefetch" href="/assets/index.html-965160fe.js" as="script"><link rel="prefetch" href="/assets/index.html-c86cc4e8.js" as="script"><link rel="prefetch" href="/assets/index.html-baedb30b.js" as="script"><link rel="prefetch" href="/assets/index.html-7ba8fa6c.js" as="script"><link rel="prefetch" href="/assets/index.html-ac01a360.js" as="script"><link rel="prefetch" href="/assets/index.html-5193fd90.js" as="script"><link rel="prefetch" href="/assets/index.html-22b0b124.js" as="script"><link rel="prefetch" href="/assets/index.html-efb4be74.js" as="script"><link rel="prefetch" href="/assets/index.html-de5f7bc2.js" as="script"><link rel="prefetch" href="/assets/index.html-d64ca4ee.js" as="script"><link rel="prefetch" href="/assets/index.html-8b424c9d.js" as="script"><link rel="prefetch" href="/assets/index.html-788d63e6.js" as="script"><link rel="prefetch" href="/assets/index.html-c251bd46.js" as="script"><link rel="prefetch" href="/assets/index.html-1e2e6518.js" as="script"><link rel="prefetch" href="/assets/index.html-b5b061c3.js" as="script"><link rel="prefetch" href="/assets/index.html-fd769173.js" as="script"><link rel="prefetch" href="/assets/index.html-6084e8ea.js" as="script"><link rel="prefetch" href="/assets/index.html-5a9a6d64.js" as="script"><link rel="prefetch" href="/assets/index.html-5588e94f.js" as="script"><link rel="prefetch" href="/assets/index.html-341f8036.js" as="script"><link rel="prefetch" href="/assets/index.html-f1fabe26.js" as="script"><link rel="prefetch" href="/assets/index.html-d0c5529c.js" as="script"><link rel="prefetch" href="/assets/index.html-bbabac24.js" as="script"><link rel="prefetch" href="/assets/index.html-b9bfccd1.js" as="script"><link rel="prefetch" href="/assets/index.html-6e1be28c.js" as="script"><link rel="prefetch" href="/assets/index.html-6a7799f5.js" as="script"><link rel="prefetch" href="/assets/index.html-3be6e7ec.js" as="script"><link rel="prefetch" href="/assets/index.html-ae92b86a.js" as="script"><link rel="prefetch" href="/assets/index.html-942d6065.js" as="script"><link rel="prefetch" href="/assets/index.html-69572243.js" as="script"><link rel="prefetch" href="/assets/index.html-cb5637a4.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-ffa662a7.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-4eb9c5b8.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/haiyue.jpg" alt="Haiyue&#39;s Blog"><!----><span class="vp-site-name hide-in-pad">Haiyue&#39;s Blog</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>Blog Home<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Master of Data Science (Unisa)"><span class="title"><img class="icon" src="/assets/icon/unisa/unisa-logo.svg" no-view style="">Master of Data Science (Unisa)</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/unisa/2022SP5.html"><!---->Term1(2022SP5)<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/unisa/2023SP2.html"><!---->Term2(2023SP2)<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/unisa/2023SP5.html"><!---->Term3(2023SP5)<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Life in 42 Adelaide"><span class="title"><img class="icon" src="/assets/icon/42adelaide/42_adelaide.svg" no-view style="">Life in 42 Adelaide</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/42adelaide/piscine.html"><img class="icon" src="/assets/icon/42adelaide/dolphin.svg" no-view style="">Piscine(Dolphin)<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/42adelaide/42cursus.html"><img class="icon" src="/assets/icon/42adelaide/sol.svg" no-view style="">42cursus(Sol)<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Techniques"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-building-columns" style=""></span>Techniques</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/geoscience.html"><!---->Geoscience<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/python.html"><!---->Python<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link active" href="/techniques/R.html"><!---->R<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/github.html"><!---->Github<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://github.com/seamice/" rel="noopener noreferrer" target="_blank" aria-label="Github" class="nav-link"><img class="icon" src="/github.svg" no-view style="">Github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>Blog Home<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><img class="icon" src="/assets/icon/unisa/unisa-logo.svg" no-view style=""><span class="vp-sidebar-title">Unisa</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-calendar-week" style=""></span><span class="vp-sidebar-title">Term1(2022SP5)</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-calendar-week" style=""></span><span class="vp-sidebar-title">Term2(2023SP2)</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-calendar-week" style=""></span><span class="vp-sidebar-title">Term3(2023SP5)</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><img class="icon" src="/assets/icon/42adelaide/42_adelaide.svg" no-view style=""><span class="vp-sidebar-title">Life in 42 Adelaide</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><img class="icon" src="/assets/icon/42adelaide/dolphin.svg" no-view style=""><span class="vp-sidebar-title">01 Piscine Period</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><img class="icon" src="/assets/icon/42adelaide/sol.svg" no-view style=""><span class="vp-sidebar-title">02 Cursus Period</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Techniques</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><img class="icon" src="/assets/icon/aws/aws-logo.svg" no-view style=""><span class="vp-sidebar-title">AWS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><span class="vp-sidebar-title">Geoscience</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><img class="icon" src="/github.svg" no-view style=""><span class="vp-sidebar-title">Github</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><img class="icon" src="/assets/icon/common/python.svg" no-view style=""><span class="vp-sidebar-title">Python</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-r" style=""></span><span class="vp-sidebar-title">R Language</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/R/01.R%20Language.html"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>01. R language Basic<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/R/02.Statistical%20tests.html"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>02. Statistical tests<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/techniques/R/03.Data%20manipulation.html"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>03. Data manipulation<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#description"><!---->Description<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#base-package"><!---->Base package<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#package-tidyverse"><!---->Package Tidyverse<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#dplyr"><!---->dplyr<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#main-functions"><!---->Main functions<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#comprehensive-use"><!---->comprehensive use<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#piping"><!---->Piping<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#joining-data"><!---->Joining data<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#other-functions"><!---->Other functions<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#mutate"><!---->mutate*<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#transmute"><!---->transmute*<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#select"><!---->select*<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#summarise"><!---->summarise*<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#package-tidyr"><!---->Package tidyr<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#conversion-between-wide-and-long-tables"><!---->Conversion between wide and long tables<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#missing-values-treatment"><!---->Missing values treatment<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/R/03.Data%20manipulation.html#package-purrr-great-tool-for-text-analysis"><!---->Package purrr: Great tool for text analysis<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-square-root-variable" style=""></span><span class="vp-sidebar-title">Math</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-infinity" style=""></span><span class="vp-sidebar-title">Advanced Mathematics</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Task</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Task/task_details.html"><span class="font-icon icon fa-fw fa-sm fas fa-cubes-stacked" style=""></span>Details for task assignments<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/intro.html"><span class="font-icon icon fa-fw fa-sm fas fa-user" style=""></span>Details of me<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>03. Data manipulation</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Haiyue</span></span><span property="author" content="Haiyue"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-20T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 19 min</span><meta property="timeRequired" content="PT19M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category7 clickable" role="navigation">R</span><!--]--><meta property="articleSection" content="R"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag1 clickable" role="navigation">data</span><span class="page-tag-item tag2 clickable" role="navigation">manipulation</span><!--]--><meta property="keywords" content="data,manipulation"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#description">Description</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#base-package">Base package</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#package-tidyverse">Package Tidyverse</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#dplyr">dplyr</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4" href="/#main-functions">Main functions</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4" href="/#comprehensive-use">comprehensive use</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#piping">Piping</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#joining-data">Joining data</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#other-functions">Other functions</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4" href="/#mutate">mutate*</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4" href="/#transmute">transmute*</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4" href="/#select">select*</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4" href="/#summarise">summarise*</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#package-tidyr">Package tidyr</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#conversion-between-wide-and-long-tables">Conversion between wide and long tables</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#missing-values-treatment">Missing values treatment</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#package-purrr-great-tool-for-text-analysis">Package purrr: Great tool for text analysis</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="description" tabindex="-1"><a class="header-anchor" href="#description" aria-hidden="true">#</a> Description</h2><p>Data manipulation using R refers to the process of transforming, cleaning, aggregating, and reorganizing data to extract valuable insights or prepare it for further analysis. This article mainly talk about several packages for data processing using R.</p><h2 id="base-package" tabindex="-1"><a class="header-anchor" href="#base-package" aria-hidden="true">#</a> Base package</h2><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># take rows with 4 cylinders or less and select only columns &quot;mpg&quot; and &quot;hp&quot;
df_small &lt;- df[df$cyl &lt;= 4, c(&quot;mpg&quot;, &quot;hp&quot;)]
head(df_small, 5) # check top 5 lines of the new data frame


# take rows with 4 cylinders or less and select only columns &quot;mpg&quot; and &quot;hp&quot;
df_small &lt;- df[df$cyl &lt;= 4, c(&quot;mpg&quot;, &quot;hp&quot;)]
head(df_small, 5) # check top 5 lines of the new data frame
##              mpg hp
## Datsun 710  22.8 93
## Merc 240D   24.4 62
## Merc 230    22.8 95
## Fiat 128    32.4 66
## Honda Civic 30.4 52


# the same result can be achieved by function &quot;subset()&quot;
df_small &lt;- subset(df, subset = df$cyl &lt;= 4, select = c(&quot;mpg&quot;, &quot;hp&quot;))
head(df_small, 5) # check top 5 lines of the new data frame
##              mpg hp
## Datsun 710  22.8 93
## Merc 240D   24.4 62
## Merc 230    22.8 95
## Fiat 128    32.4 66
## Honda Civic 30.4 52

# adding new columns to the data frame
df$model &lt;- rownames(df) # store rownames as a column
head(df, 5)

# select all rows but only some columns
x1 &lt;- df[ , -c(1:8)] # select all columns except first 8 columns
x2 &lt;- df[ , c(&quot;mpg&quot;, &quot;hp&quot;, &quot;cyl&quot;, &quot;model&quot;)] # select four columns with given names
# combine or join together two data frames by a common variable
df_new &lt;- merge(x1, x2, by = &quot;model&quot;)
head(df_new, 5)
##                model am gear carb  mpg  hp cyl
## 1        AMC Javelin  0    3    2 15.2 150   8
## 2 Cadillac Fleetwood  0    3    4 10.4 205   8
## 3         Camaro Z28  0    3    4 13.3 245   8
## 4  Chrysler Imperial  0    3    4 14.7 230   8
## 5         Datsun 710  1    4    1 22.8  93   4

# group by two variables and make aggregation for other two variables
aggregate(cbind(mpg, hp) ~ am + cyl, data = df_new, FUN = &quot;mean&quot;)
##  am cyl      mpg        hp
## 1 0   4 22.90000  84.66667
## 2 1   4 28.07500  81.87500
## 3 0   6 19.12500 115.25000
## 4 1   6 20.56667 131.66667
## 5 0   8 15.05000 194.16667
## 6 1   8 15.40000 299.50000

# if you need to summarise only one variable, even tapply will do the job
# of grouping and making aggregation
tapply(mtcars$mpg, mtcars[, c(&quot;cyl&quot;, &quot;am&quot;)], mean)
##   am
##cyl      0        1
##  4 22.900 28.07500
##  6 19.125 20.56667
##  8 15.050 15.40000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="package-tidyverse" tabindex="-1"><a class="header-anchor" href="#package-tidyverse" aria-hidden="true">#</a> Package Tidyverse</h2><p>The <code>tidyverse</code> is a <span style="color:orange;">collection of packages</span> that use the same approach to data manipulation in R and allows to do many things in a better and more efficient way. You can install a package <code>tidyverse</code> and get a set of 8 core packages, or you can install and then load each package individually when you need it.</p><p>You had already seen one package from <code>tidyverse</code> collection - it was ready for reading and writing csv files. Later, you will get ggplot2 - the best tool for data visualisation, stringr for working with text and some others. This lecture topic is mostly about data frames transformation and package <code>dplyr</code>.</p><h3 id="dplyr" tabindex="-1"><a class="header-anchor" href="#dplyr" aria-hidden="true">#</a> dplyr</h3><p>First is first, a website for dplyr package - <a href="https://dplyr.tidyverse.org/" target="_blank" rel="noopener noreferrer">https://dplyr.tidyverse.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> You can find there an introduction into <code>dplyr</code> and (the most important!) a cheat sheet with its main functions.</p><h4 id="main-functions" tabindex="-1"><a class="header-anchor" href="#main-functions" aria-hidden="true">#</a> Main functions</h4><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># load the library before you can use it
# and suppress messages as there are too many of them
suppressMessages(library(dplyr))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-29-0" aria-selected="true">filter()</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-29-1" aria-selected="false">arrange()</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-29-2" aria-selected="false">select()</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-29-3" aria-selected="false">mutate()</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-29-4" aria-selected="false">summarise()</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-29-5" aria-selected="false">group_by()</button></div><!--[--><div class="vp-tab active" id="tab-29-0" role="tabpanel" aria-expanded="true"><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># to pick rows by given criteria
# take only rows with number of cylinders equal 4
df_small &lt;- filter(mtcars, cyl == 4)
head(df_small)
##                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-29-1" role="tabpanel" aria-expanded="false"><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># to reorder rows by the values in one or multiple variables
# arrange rows by the value of mpg in the ascending order (from smallest to largest)
arrange(df_small, mpg)
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1

# arrange rows by the value of mpg in the descending order (from largest to smallest)
# with the help of function desc()
arrange(df_small, desc(mpg))
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-29-2" role="tabpanel" aria-expanded="false"><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># to pick variables/columns by their names
# select only some columns (cyl, hp, mpg) from the original data frame
df_narrow &lt;- select(mtcars, cyl, hp, mpg) # columns appear in this order
head(df_narrow)
##                   cyl  hp  mpg
## Mazda RX4           6 110 21.0
## Mazda RX4 Wag       6 110 21.0
## Datsun 710          4  93 22.8
## Hornet 4 Drive      6 110 21.4
## Hornet Sportabout   8 175 18.7
## Valiant             6 105 18.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-29-3" role="tabpanel" aria-expanded="false"><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># to create new variables
# create a new column and set its values to rows names
# then create another column with miles per gallon per one horse power
df &lt;- mutate(mtcars, model = rownames(mtcars), mpghp = mpg / hp)
# check the results and see two new columns
head(df)
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb             model     mpghp
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4         Mazda RX4 0.1909091
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4     Mazda RX4 Wag 0.1909091
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1        Datsun 710 0.2451613
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1    Hornet 4 Drive 0.1945455
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2 Hornet Sportabout 0.1068571
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1           Valiant 0.1723810
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-29-4" role="tabpanel" aria-expanded="false"><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># to aggregate multiple values to a single summary
# aggreagate all rows in to a single statistical summary
# n is a number of observations
# mu_mpg and sd_mpg are mean and standard deviations of miles per gallon
# median_hp is a median of horse power variable
# there can be any other summaries for any other variable
summarise(df, n = n(), mu_mpg = mean(mpg), sd_mpg = sd(mpg), median_hp = median(hp))
##    n   mu_mpg   sd_mpg median_hp
## 1 32 20.09062 6.026948       123
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="vp-tab" id="tab-29-5" role="tabpanel" aria-expanded="false"><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>#  to change the scope of the above functions from the full data set into multiple groups organised by values in one or multiple variables.
# All function above worked with the full data set. However, you might want to split 
# the data frame into some groups and then run the function for each group separately. 
# Function group_by() would be handy here

# group the data frame by two variables at the same time - &quot;cyl&quot; and &quot;am&quot;
df &lt;- group_by(mtcars, cyl, am)
# aggreagate all rows in the each group [!] in to a single statistical summary
# hence there is a row with a summary for each group
summarise(df, n = n(), mu_mpg = mean(mpg), sd_mpg = sd(mpg), median_hp = median(hp))
## # A tibble: 6 × 6
## # Groups:   cyl [3]
##     cyl    am     n mu_mpg sd_mpg median_hp
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;
## 1     4     0     3   22.9  1.45       95  
## 2     4     1     8   28.1  4.48       78.5
## 3     6     0     4   19.1  1.63      116. 
## 4     6     1     3   20.6  0.751     110  
## 5     8     0    12   15.0  2.77      180  
## 6     8     1     2   15.4  0.566     300.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--]--></div><h4 id="comprehensive-use" tabindex="-1"><a class="header-anchor" href="#comprehensive-use" aria-hidden="true">#</a> comprehensive use</h4><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>
# group the data frame in three groups by a number of cylinders
df &lt;- group_by(mtcars, cyl)
# create a new column with miles per gallon
# per the average [!] horse power in the corresponding group
df &lt;- mutate(df, mpghp = mpg / mean(hp))
# check top 5 rows of the resulted data frame
head(df, 5)
## # A tibble: 5 × 12
## # Groups:   cyl [3]
##     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb  mpghp
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4 0.172 
## 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4 0.172 
## 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1 0.276 
## 4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1 0.175 
## 5  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2 0.0894



df &lt;- select(mtcars, cyl, am, mpg, hp) # select only 4 columns to make more compact example
df &lt;- group_by(df, cyl, am) # group a data frame by two variables
df &lt;- arrange(df, mpg, .by_group = TRUE) # sort every group by value of &quot;mpg&quot;
head(df, 12)
## # A tibble: 12 × 4
## # Groups:   cyl, am [3]
##      cyl    am   mpg    hp
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     4     0  21.5    97
##  2     4     0  22.8    95
##  3     4     0  24.4    62
##  4     4     1  21.4   109
##  5     4     1  22.8    93
##  6     4     1  26      91
##  7     4     1  27.3    66
##  8     4     1  30.4    52
##  9     4     1  30.4   113
## 10     4     1  32.4    66
## 11     4     1  33.9    65
## 12     6     0  17.8   123

summarise(df, mpg_mu = mean(mpg), hp_median = median(hp)) # summary for each group
## # A tibble: 6 × 4
## # Groups:   cyl [3]
##     cyl    am mpg_mu hp_median
##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;
## 1     4     0   22.9      95  
## 2     4     1   28.1      78.5
## 3     6     0   19.1     116. 
## 4     6     1   20.6     110  
## 5     8     0   15.0     180  
## 6     8     1   15.4     300.

summarise(ungroup(df), # data frame is ungrouped
          mpg_mu = mean(mpg), hp_median = median(hp)) # summary for a full data frame
## # A tibble: 1 × 2
##   mpg_mu hp_median
##    &lt;dbl&gt;     &lt;dbl&gt;
## 1   20.1       123

# Functions group_by() and summarise() are two most common functions
# to go together and they make a replacement for the function aggregate()
# presented in the beginning but with much better performance for large
# data sets and much higher flexibility.

# group by two variable and make aggregation for two other variables
aggregate(cbind(mpg, hp) ~ am + cyl, data = mtcars, FUN = &quot;mean&quot;)

# exact replication of the above example with aggregate()
temp &lt;- group_by(mtcars, cyl, am)
summarise(temp, mpg = mean(mpg), hp = mean(hp))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The syntax of all functions is the same. The first element is a data frame. The subsequent arguments are instructions on what to do with the data using variable names without quotation marks. The result of these functions is a data frame too.</p><p>Fine print note: in reality, the result of all functions in dplyr is not always a data frame, it can be an object of class tibble introduced by the package with the same name from the tidyverse collection. Tibble is an enhanced version of a data frame and from the practical point you can think about it and treat it as a data frame. Also, for some functions the result might be of a different data type. However, in the most situations dplyr is about data frames getting in and out.</p><h3 id="piping" tabindex="-1"><a class="header-anchor" href="#piping" aria-hidden="true">#</a> Piping</h3><p>The data frame which used to be the first parameter of all <code>dplyr</code> functions disappeared. The reason is that whatever object you pipe into a function, becomes the first parameter to take variables from and to apply functions.</p><p>The original data frame can be assessed by every function even if it is not mentioned explicitly. You can do it by operator (.) - just dot. In the example below, there is a new variable created with the number of rows in the original data frame.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>mtcars %&gt;% # take the data frame for piping
  select(mpg, hp) %&gt;% # select two variables - just to make an output shorter
  mutate(nn = nrow(.)) %&gt;% # create a new column with the value of rows count
  head(5) # see top 5 rows of the resulted data frame
##                    mpg  hp nn
## Mazda RX4         21.0 110 32
## Mazda RX4 Wag     21.0 110 32
## Datsun 710        22.8  93 32
## Hornet 4 Drive    21.4 110 32
## Hornet Sportabout 18.7 175 32

# Function nrow() is a part of the base package and it would not know 
# how to work in dplyr environment. Operator (.) makes a bridge between
# base and dplyr and allows to assess the data frame used as the “original”
# first attribute in the function.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Piping is available in many programming languages and it was introduced in R by packages <code>magrittr</code> and <code>pipeR</code>. Package <code>dplyr</code> has only one piping operator <code>%&gt;%</code>. If you check the other two packages, you find several other piping operators. For example, * <code>%&gt;&gt;%</code> claimed to be “somewhat” quicker and has multiple “alternative” ways to use piping. Check the help file by <code>help(&quot;%&gt;&gt;%&quot;)</code> after loading package <code>pipeR</code>. * <code>%T&gt;%</code> Tee operator to split the data flow and put the same data frame into two different functions. * <code>%$%</code> Exposition operator to pipe not a full data set but allow the following function to access (or expose) individual variables from it.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>library(magrittr)
mtcars %&gt;% # data frame to start with
  select(mpg, hp) %T&gt;% # select two columns of interest only and pipe them
  plot(.) %&gt;% # in both: function plot() for plotting and
  colMeans() # function colMeans() to get averages

# &quot;expose&quot; columns from the data frame as separate variables
# to use with a basic function
mtcars %$% cor(mpg, hp)

# similar task with dplyr functionality results in a matrx
# as cor() takes all possible correlations in the data frame
mtcars %&gt;%
  select(mpg, hp) %&gt;%
  cor

library(pipeR)
mtcars$mpg %&gt;&gt;% # take variable &quot;mpg&quot; only
  sample(size = 10000, replace = TRUE) %&gt;&gt;% # make a random draw with replacement
  density(kernel = &quot;gaussian&quot;) %&gt;&gt;% # calculate density function
  plot(main = &quot;density of mpg (bootstrap)&quot;) # plot the resu


library(pipeR)
apply(
  1:10ˆ6, # below function will be repeated 1,000,000 times
  function(i) {
    sample(LETTERS, 4, replace = F) %&gt;&gt;% # draw 4 letters
    paste(collapse = &quot;&quot;) %&gt;&gt;% # concatenate them
    &quot;==&quot;(&quot;COMP&quot;)
}) %&gt;&gt;% # check if result is COMP
  sum # check how many times there is an equality

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="joining-data" tabindex="-1"><a class="header-anchor" href="#joining-data" aria-hidden="true">#</a> Joining data</h3><p>Package base has a function <code>merge()</code>, <code>dplyr</code> brings a set of join functions.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>band_members # data frame 1
band_instruments # data frame 2
# provide first and second data frames to join
# or other names - left and right data frames
inner_join(band_members, band_instruments, by = &quot;name&quot;)
## # A tibble: 2 × 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 John  Beatles guitar
## 2 Paul  Beatles bass

# an alternative is to use piping
# left data frame is piped into a function with right data frame provided as a parameter
band_members %&gt;% inner_join(band_instruments, by=&quot;name&quot;)
## # A tibble: 2 × 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 John  Beatles guitar
## 2 Paul  Beatles bass

# outer join - keep all rows from both data frames and fill missing cells by NA
band_members %&gt;% full_join(band_instruments, by=&quot;name&quot;)
## # A tibble: 4 × 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 Mick  Stones  NA    
## 2 John  Beatles guitar
## 3 Paul  Beatles bass  
## 4 Keith NA      guitar

# left join - keep all rows from the left data frame and only common from the right one
band_members %&gt;% left_join(band_instruments, by=&quot;name&quot;)
## # A tibble: 3 × 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 Mick  Stones  NA    
## 2 John  Beatles guitar
## 3 Paul  Beatles bass

# right join - keep all rows from the right data frame and only common from the left one
band_members %&gt;% right_join(band_instruments, by=&quot;name&quot;)
## # A tibble: 3 × 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 John  Beatles guitar
## 2 Paul  Beatles bass  
## 3 Keith NA      guitar

# prepare data for the example
df1 &lt;- starwars %&gt;% select(name, height, gender, homeworld, species)
df2 &lt;- starwars %&gt;% select(mass, height, gender, homeworld, species)
df3 &lt;- starwars %&gt;% select(name, hair_color, skin_color, eye_color)

#### try to join that data back
# we can not use a single variable to join as their values are not unique
# result of the joining would be not what you expected, e.g.
df1 %&gt;% inner_join(df2, by=&quot;gender&quot;) %&gt;% head(5)


# however, using multiple common variables might be more productive
df1 %&gt;% inner_join(df2, by=c(&quot;height&quot;, &quot;gender&quot;, &quot;homeworld&quot;, &quot;species&quot;)) %&gt;% head(5)

# joining three data frames by piping result of the first join into the second one
df1 %&gt;%
  inner_join(df2, by=c(&quot;height&quot;, &quot;gender&quot;, &quot;homeworld&quot;, &quot;species&quot;)) %&gt;%
  inner_join(df3, by=&quot;name&quot;) %&gt;%
  head(5)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="other-functions" tabindex="-1"><a class="header-anchor" href="#other-functions" aria-hidden="true">#</a> Other functions</h3><h4 id="mutate" tabindex="-1"><a class="header-anchor" href="#mutate" aria-hidden="true">#</a> mutate*</h4><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># create a small data set for the example
df &lt;- mtcars %&gt;% select(mpg, hp, cyl)
head(df)
##                    mpg  hp cyl
## Mazda RX4         21.0 110   6
## Mazda RX4 Wag     21.0 110   6
## Datsun 710        22.8  93   4
## Hornet 4 Drive    21.4 110   6
## Hornet Sportabout 18.7 175   8
## Valiant           18.1 105   6

# do summation for each column and get new columns
df %&gt;% mutate_all(list(mysum = ~ sum(.))) %&gt;% head(5)
##                    mpg  hp cyl mpg_mysum hp_mysum cyl_mysum
## Mazda RX4         21.0 110   6     642.9     4694       198
## Mazda RX4 Wag     21.0 110   6     642.9     4694       198
## Datsun 710        22.8  93   4     642.9     4694       198
## Hornet 4 Drive    21.4 110   6     642.9     4694       198
## Hornet Sportabout 18.7 175   8     642.9     4694       198

# normalise each column
df %&gt;% mutate_all(list(norm = ~ scale(.))) %&gt;% head(5)
##                    mpg  hp cyl   mpg_norm    hp_norm   cyl_norm
## Mazda RX4         21.0 110   6  0.1508848 -0.5350928 -0.1049878
## Mazda RX4 Wag     21.0 110   6  0.1508848 -0.5350928 -0.1049878
## Datsun 710        22.8  93   4  0.4495434 -0.7830405 -1.2248578
## Hornet 4 Drive    21.4 110   6  0.2172534 -0.5350928 -0.1049878
## Hornet Sportabout 18.7 175   8 -0.2307345  0.4129422  1.0148821

# mutate only selected columns, which names can be provided as character vector
my_cols &lt;- c(&quot;hp&quot;, &quot;mpg&quot;)
df %&gt;% mutate_at(my_cols, list(norm = ~ scale(.))) %&gt;% head(5)
##                    mpg  hp cyl    hp_norm   mpg_norm
## Mazda RX4         21.0 110   6 -0.5350928  0.1508848
## Mazda RX4 Wag     21.0 110   6 -0.5350928  0.1508848
## Datsun 710        22.8  93   4 -0.7830405  0.4495434
## Hornet 4 Drive    21.4 110   6 -0.5350928  0.2172534
## Hornet Sportabout 18.7 175   8  0.4129422 -0.2307345

# mutate only columns that satisfy some criteria
# if column is type double - convert it to character
df %&gt;% mutate_if(is.double, as.character) %&gt;% head(5)
##                    mpg  hp cyl
## Mazda RX4           21 110   6
## Mazda RX4 Wag       21 110   6
## Datsun 710        22.8  93   4
## Hornet 4 Drive    21.4 110   6
## Hornet Sportabout 18.7 175   8


####################################################
# mutate only columns according to &quot;fancy&quot; criteria
# and then use multiple functions for transformation
# prepare a custom function that return TRUE or FALSE for the column
my_test &lt;- function(x) { any(x &gt; 10) }
# use that &quot;fancy&quot; function to select columns for mutation
df %&gt;% mutate_if(my_test, list(norm = ~ scale(.), sqrt = ~ sqrt(.))) %&gt;% head(5)
##                    mpg  hp cyl   mpg_norm    hp_norm mpg_sqrt   hp_sqrt
## Mazda RX4         21.0 110   6  0.1508848 -0.5350928 4.582576 10.488088
## Mazda RX4 Wag     21.0 110   6  0.1508848 -0.5350928 4.582576 10.488088
## Datsun 710        22.8  93   4  0.4495434 -0.7830405 4.774935  9.643651
## Hornet 4 Drive    21.4 110   6  0.2172534 -0.5350928 4.626013 10.488088
## Hornet Sportabout 18.7 175   8 -0.2307345  0.4129422 4.324350 13.228757
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="transmute" tabindex="-1"><a class="header-anchor" href="#transmute" aria-hidden="true">#</a> transmute*</h4><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># simple alternative to mutate() - result is one column only
df %&gt;% transmute(new_mpg = mpgˆ2) %&gt;% head(5)
# error occurs

# create and keep only normalised versions of all variables
df %&gt;% transmute_all(list(norm = ~ scale(.))) %&gt;% head(5)
##                     mpg_norm    hp_norm   cyl_norm
## Mazda RX4          0.1508848 -0.5350928 -0.1049878
## Mazda RX4 Wag      0.1508848 -0.5350928 -0.1049878
## Datsun 710         0.4495434 -0.7830405 -1.2248578
## Hornet 4 Drive     0.2172534 -0.5350928 -0.1049878
## Hornet Sportabout -0.2307345  0.4129422  1.0148821

# create and keep normalised versions of selected variables only
my_cols &lt;- c(&quot;hp&quot;, &quot;mpg&quot;)
df %&gt;% transmute_at(my_cols, list(norm = ~ scale(.))) %&gt;% head(5)
##                      hp_norm   mpg_norm
## Mazda RX4         -0.5350928  0.1508848
## Mazda RX4 Wag     -0.5350928  0.1508848
## Datsun 710        -0.7830405  0.4495434
## Hornet 4 Drive    -0.5350928  0.2172534
## Hornet Sportabout  0.4129422 -0.2307345

# use a custom function to select columns for mutation
# and keep only new variables
my_test &lt;- function(x) { any(x &gt; 10) }
df %&gt;% transmute_if(my_test, list(norm = ~ scale(.), sqrt = ~ sqrt(.))) %&gt;% head(5)
##                     mpg_norm    hp_norm mpg_sqrt   hp_sqrt
## Mazda RX4          0.1508848 -0.5350928 4.582576 10.488088
## Mazda RX4 Wag      0.1508848 -0.5350928 4.582576 10.488088
## Datsun 710         0.4495434 -0.7830405 4.774935  9.643651
## Hornet 4 Drive     0.2172534 -0.5350928 4.626013 10.488088
## Hornet Sportabout -0.2307345  0.4129422 4.324350 13.228757
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="select" tabindex="-1"><a class="header-anchor" href="#select" aria-hidden="true">#</a> select*</h4><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># pull values from the variable into a vector
mtcars %&gt;% pull(mpg)
##  [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
## [16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
## [31] 15.0 21.4

# You can find all of them in the help file by command ?tidyselect::select_helpers
# select only variables that starts with &quot;d&quot;
mtcars %&gt;% select(starts_with(&quot;d&quot;)) %&gt;% head(5)
##                   disp drat
## Mazda RX4          160 3.90
## Mazda RX4 Wag      160 3.90
## Datsun 710         108 3.85
## Hornet 4 Drive     258 3.08
## Hornet Sportabout  360 3.15


# select only variables that ends with &quot;p&quot;
mtcars %&gt;% select(ends_with(&quot;p&quot;)) %&gt;% head(5)
##                   disp  hp
## Mazda RX4          160 110
## Mazda RX4 Wag      160 110
## Datsun 710         108  93
## Hornet 4 Drive     258 110
## Hornet Sportabout  360 175

# select only variables that contains &quot;r&quot;
mtcars %&gt;% select(contains(&quot;r&quot;)) %&gt;% head(5)
##                   drat gear carb
## Mazda RX4         3.90    4    4
## Mazda RX4 Wag     3.90    4    4
## Datsun 710        3.85    4    1
## Hornet 4 Drive    3.08    3    1
## Hornet Sportabout 3.15    3    2

# select only variables that match a regular expression
# variables containing &quot;sp&quot; or &quot;ca&quot;
mtcars %&gt;% select(matches(&quot;sp|ca&quot;)) %&gt;% head(5)
##                   disp carb
## Mazda RX4          160    4
## Mazda RX4 Wag      160    4
## Datsun 710         108    1
## Hornet 4 Drive     258    1
## Hornet Sportabout  360    2


# select variables listed in the character vector
my_vars &lt;- c(&quot;mpg&quot;, &quot;hp&quot;, &quot;am&quot;)
mtcars %&gt;% select(all_of(my_vars)) %&gt;% head(5)
##                    mpg  hp am
## Mazda RX4         21.0 110  1
## Mazda RX4 Wag     21.0 110  1
## Datsun 710        22.8  93  1
## Hornet 4 Drive    21.4 110  0
## Hornet Sportabout 18.7 175  0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Besides select_helpers functions, there are also alternatives with <code>_all()</code>, <code>_at()</code> and <code>_if()</code> – similar to <code>mutate()</code> function. You can select variables if they satisfy some criteria. You can use <code>select_at()</code> with the vector of characters listing variables of interest.</p><p>Function <code>select_all()</code> looks strange – the source data frame already has all variables, so there is no point to select them again. Well, select has some extra functionality – it can rename selected variables.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># select all variables and change their names for uppercase, then show top 5 rows only
mtcars %&gt;% select_all(toupper) %&gt;% head(5)
##                    MPG CYL DISP  HP DRAT    WT  QSEC VS AM GEAR CARB
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There is a wrapper of <code>select()</code> function that makes the task of renaming more obvious and clear – <code>rename()</code>. Both functions do a very similar job but the first one retains only selected variables while the second one keeps all variables.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>my_cols &lt;- c(&quot;hp&quot;, &quot;mpg&quot;)
# select columns listed in the vector and change names to TitleCase
mtcars %&gt;% select_at(my_cols, tools::toTitleCase) %&gt;% head(5)
##                    Hp  Mpg
## Mazda RX4         110 21.0
## Mazda RX4 Wag     110 21.0
## Datsun 710         93 22.8
## Hornet 4 Drive    110 21.4
## Hornet Sportabout 175 18.7


# change names of columns listed in the vector and keep everything else as is
mtcars %&gt;% rename_at(my_cols, tools::toTitleCase) %&gt;% head(5)
##                    Mpg cyl disp  Hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="summarise" tabindex="-1"><a class="header-anchor" href="#summarise" aria-hidden="true">#</a> summarise*</h4><p>To aggregate all data or data in each group you can use function <code>summarise()</code> or <code>summarize()</code> if you prefer American spelling. This function was presented in the section about main functions. Similar to <code>mutate()</code><br> function there are scoped variants of <code>summarise()</code> that allows to skip providing names for all variables you want to <code>summarise/aggregate</code>.<br><code>summarise_all()</code> applies a function to all variables.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># select only three columns to make example smaller
df &lt;- mtcars %&gt;% select(mpg, cyl, hp)
# get mean and median values for every variable/column in the data frame
df %&gt;% summarise_all(list(m1 = mean, m2 = median))
##     mpg_m1 cyl_m1    hp_m1 mpg_m2 cyl_m2 hp_m2
## 1 20.09062 6.1875 146.6875   19.2      6   123
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>summarise_at()</code> apply a function to variables selected with a character vector.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># prepare a character vector with variables to analyse
my_vars &lt;- c(&quot;mpg&quot;, &quot;hp&quot;, &quot;cyl&quot;)
# get mean for each selected variable
mtcars %&gt;% summarise_at(my_vars, mean)
##        mpg       hp    cyl
## 1 20.09062 146.6875 6.1875
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>summarise_if()</code> apply a function to variables selected with a function that returns TRUE or FASLE for each variable</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># get mean for variables that function is.numeric() returns TRUE
mtcars %&gt;% summarise_if(is.numeric, mean)
##        mpg    cyl     disp       hp     drat      wt     qsec     vs      am   gear   carb
## 1 20.09062 6.1875 230.7219 146.6875 3.596563 3.21725 17.84875 0.4375 0.40625 3.6875 2.8125
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Most aggregation R functions can be used with <strong>summarise()</strong>:</p><ul><li>mean(), sd(), var(), sum()</li><li>median(), IQR() , min(), max(), quantile()</li></ul><p>There are some uniquely <strong>dplyr</strong> functions that might be handy:</p><ul><li><code>n()</code> - count number of rows</li><li><code>n_distinct()</code> - count unique values</li><li><code>first()</code>, <code>last()</code>, <code>nth()</code> – first, last and nth value in a variable/column. The result will depend on the order of rows.</li></ul><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># get a number of rows, max value in &quot;mpg&quot;, number of unique values in &quot;cyl&quot;
mtcars %&gt;% summarise(n_rows = n(), max_mpg = max(mpg), n_cyl = n_distinct(cyl))
##   n_rows max_mpg n_cyl
## 1     32    33.9     3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="package-tidyr" tabindex="-1"><a class="header-anchor" href="#package-tidyr" aria-hidden="true">#</a> Package tidyr</h2><p>Package <code>tidyr</code> is another package from tidyverse collection. It focuses on making data “tidy”, that is, nice and ready for analysis using other tools and dplyr in particular. Here is a web site – <a href="https://tydir.tidyverse.org/index.html" target="_blank" rel="noopener noreferrer">https://tydir.tidyverse.org/index.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> – for the package with the introduction and cheat sheet</p><h3 id="conversion-between-wide-and-long-tables" tabindex="-1"><a class="header-anchor" href="#conversion-between-wide-and-long-tables" aria-hidden="true">#</a> Conversion between wide and long tables</h3><p>Data we get from our clients or other sources are not always ready for analysis. It is really important to understand what are variables, observations and values in the data. This is not an obvious question. For example, below is a data set with results of religion and income survey.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># load all packages at once - dplyr, tidyr, purrr, readr and some others
library(tidyverse)
head(relig_income, 10)
## # A tibble: 10 x 11
## religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`
## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Agnostic 27 34 60 81 76 137 122
## 2 Atheist 12 27 37 52 35 70 73
## 3 Buddhist 27 21 30 34 33 58 62
## 4 Catholic 418 617 732 670 638 1116 949
## 5 Don’t k~ 15 14 15 11 10 35 21
## 6 Evangel~ 575 869 1064 982 881 1486 949
## 7 Hindu 1 9 7 9 11 34 47
## 8 Histori~ 228 244 236 238 197 223 131
## 9 Jehovah~ 20 27 24 24 21 30 15
## 10 Jewish 19 19 25 25 30 95 69
## # ... with 3 more variables: $100-150k &lt;dbl&gt;, &gt;150k &lt;dbl&gt;,
## # Don&#39;t know/refused &lt;dbl&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>However, if you use your data understanding then you see that there are only three real variables: name of a religion, income group and number of respondents. This format of representing data (with 11 columns as above) is called “wide table”, while for a proper data analysis you need (in most cases) so-called “long table” format (with 3 columns only). Likely for you, there are multiple tools to do a conversion.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># convert wide table into a long table
# key is a name of the new variable to put original column names as values
# value is a name of the new variable to store all values from original columns
# -religion is a variable that should stay as is and not to be included in &quot;gathering&quot;
relig_income_long &lt;- gather(relig_income, key = &quot;Income&quot;, value = &quot;Counts&quot;, -religion)
# check the new data frame size - just three columns but 180 rows
# it is truely a long table
dim(relig_income_long)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Long table is good for data analysis and data visualisation. Wide table is good for reporting and for a small number of data analysis techniques. So, there is a backward conversion available.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># convert long table into a wide table
# key variable is used to create new columns
# value variable provides values for these new columns
relig_income_wide &lt;- spread(relig_income_long, key = &quot;Income&quot;, value = &quot;Counts&quot;)
# check the new data frame size - it is wide and short
dim(relig_income_wide)

# convert to long table
relig_income_long &lt;- relig_income %&gt;% pivot_longer(col = -religion, names_to = &quot;Income&quot;, values_to = &quot;Counts&quot;)
dim(relig_income_long) # check the size of the long table

# convert to wide table
relig_income_wide &lt;- relig_income_long %&gt;% pivot_wider(names_from = &quot;Income&quot;, values_from = &quot;Counts&quot;)
dim(relig_income_wide) # check the size of the wide table

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="missing-values-treatment" tabindex="-1"><a class="header-anchor" href="#missing-values-treatment" aria-hidden="true">#</a> Missing values treatment</h3><p>Very useful functionality of tidyr working well with dplyr is a treatment for missing values You can remove rows with missing values or replace them with something. For example</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># create a small data frame for the example
df &lt;- data.frame(x = c(1, 2, NA), y = c(&quot;a&quot;, NA, &quot;b&quot;), stringsAsFactors = FALSE)
df # have a look on the result - two variable &quot;x&quot; and &quot;y&quot;
##   x   y
## 1 1   a
## 2 2  &lt;NA&gt;
## 3 NA  b

df %&gt;% drop_na() # drop all rows with NA values
## x y
## 1 1 a
## 2 2 &lt;NA&gt;

# variables &quot;x&quot; and &quot;y&quot; are of different type, so we replace NA differently
df %&gt;% replace_na(list(x = 0, y = &quot;unknown&quot;))
## x y
## 1 1 a
## 2 2 unknown
## 3 0 b

# replacement for one variable only
df %&gt;% replace_na(list(x = 0))
## x y
## 1 1 a
## 2 2 &lt;NA&gt;
## 3 0 b


# alternative approach is to combine tidyr and dplyr and use replacement for a vector
# as every variable in a data frame is a vector. You can drop &quot;list&quot; here.
df %&gt;% mutate(xx = replace_na(x, 0))
## x y xx
## 1 1 a 1
## 2 2 &lt;NA&gt; 2
## 3 NA b 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="package-purrr-great-tool-for-text-analysis" tabindex="-1"><a class="header-anchor" href="#package-purrr-great-tool-for-text-analysis" aria-hidden="true">#</a> Package purrr: Great tool for text analysis</h2><p>One more package to mention here is <em><strong>purrr</strong></em>. As usual, there is a web site for the package <a href="https://purrr/" target="_blank" rel="noopener noreferrer">https://purrr<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.<a href="http://tidyverse.org/index.html" target="_blank" rel="noopener noreferrer">tidyverse.org/index.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> with the introduction and cheat sheet. As <em><strong>dplyr</strong></em> is a tool of choice for any kinds of data frame transformations, package <em><strong>purrr</strong></em> is an excellent tool for transformation of lists and vectors. Hence, if you work with structured or semi-structured data, which happens most of the time, you use <em><strong>dplyr</strong></em>.<br> If you get into the area of unstructured data, for example, text analysis, then you need another tool for data transformations and <em><strong>purrr</strong></em> is great here. You will do this type of analysis later.</p><p>The main function in <em><strong>purrr</strong></em> is <em><strong>map()</strong></em> and it has a large number of variants. Function <em><strong>map()</strong></em> does the same job as functions <em><strong>sapply()</strong></em> or <em><strong>lapply()</strong></em> presented previously but <em><strong>map()</strong></em> does this job way more efficient. As <em><strong>purrr</strong></em> is a part of <em><strong>tidyverse</strong></em> collection, it supports <em><strong>piping.</strong></em></p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code>1:5 %&gt;% # vector as an input
map(rnorm, n = 3) # some function applied to each element of the input vector
## [[1]]
## [1] 2.1153059 0.7227579 1.8153231
##
## [[2]]
## [1] 3.286483 1.340960 1.557657
##
## [[3]]
## [1] 2.876652 3.066912 3.075800
##
## [[4]]
## [1] 4.612661 2.392644 3.399425
##
## [[5]]
## [1] 3.522628 5.100503 5.504073
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By default, result of function <code>map()</code> is a list. However, there are alternatives that allows to output different types of vectors and even a data frame.</p><div class="language-R line-numbers-mode" data-ext="R"><pre class="language-R"><code># prepare an input list
favorite_desserts &lt;- list(Sophia = &quot;banana bread&quot;,
Eliott = &quot;pancakes&quot;,
Karina = &quot;chocolate cake&quot;)
# apply function paste() and output a character vector
favorite_desserts %&gt;% map_chr(~ paste(.x, &quot;rocks!&quot;))
## Sophia Eliott Karina
## &quot;banana bread rocks!&quot; &quot;pancakes rocks!&quot; &quot;chocolate cake rocks!&quot;

favorite_desserts %&gt;% map_chr(function(x) paste(x, &quot;rocks!&quot;))
## Sophia Eliott Karina
## &quot;banana bread rocks!&quot; &quot;pancakes rocks!&quot; &quot;chocolate cake rocks!&quot;


mtcars %&gt;% # input is a data frame
  split(.$cyl) %&gt;% # split mtcars in three data frames
  map(~ lm(mpg ~ wt, data = .x)) %&gt;% # run linear model for each data frame
  map(summary) %&gt;% # get summary of fits for each model
  map_dbl(&quot;r.squared&quot;) # extract values of R-squared and store then as a vector
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: nutterair1989@gmail.com">Haiyue</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/techniques/R/02.Statistical%20tests.html"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-registered" style=""></span>02. Statistical tests</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Email me if needed</div><div class="vp-copyright">Copyright © 2023 Haiyue</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-49149863.js" defer></script>
  </body>
</html>
